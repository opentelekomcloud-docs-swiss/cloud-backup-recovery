:original_name: ShowBackup.html

.. _ShowBackup:

Querying a Specified Backup
===========================

Function
--------

This API is used to query the backup of a specific ID.

URI
---

GET /v3/{project_id}/backups/{backup_id}

.. table:: **Table 1** Path Parameters

   ========== ========= ====== ===========
   Parameter  Mandatory Type   Description
   ========== ========= ====== ===========
   backup_id  Yes       String Backup ID
   project_id Yes       String Project ID
   ========== ========= ====== ===========

Request Parameters
------------------

.. table:: **Table 2** Request header parameters

   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                   |
   +=================+=================+=================+===============================================================================================================================================================================+
   | X-Auth-Token    | Yes             | String          | User token.                                                                                                                                                                   |
   |                 |                 |                 |                                                                                                                                                                               |
   |                 |                 |                 | Obtained by calling the corresponding IAM API. If the request is successfully processed, the value of **X-Subject-Token** included in the response header is the token value. |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +-----------+----------------------------------------------------------------+-------------+
   | Parameter | Type                                                           | Description |
   +===========+================================================================+=============+
   | backup    | :ref:`BackupDetail <showbackup__response_backupdetail>` object | Backup      |
   +-----------+----------------------------------------------------------------+-------------+

.. _showbackup__response_backupdetail:

.. table:: **Table 4** BackupDetail

   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | Parameter             | Type                                                                   | Description                                                  |
   +=======================+========================================================================+==============================================================+
   | checkpoint_id         | String                                                                 | Restore point ID                                             |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | created_at            | String                                                                 | Creation time, for example, **2020-02-05T10:38:34.209782**   |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | description           | String                                                                 | Backup description                                           |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | expired_at            | String                                                                 | Expiration time, for example, **2020-02-05T10:38:34.209782** |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | extend_info           | :ref:`BackupExtendInfo <showbackup__response_backupextendinfo>` object | Extended information                                         |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | id                    | String                                                                 | Backup ID                                                    |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | image_type            | String                                                                 | Backup type                                                  |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | Enumeration values:                                          |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **backup**                                                |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **replication**                                           |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | name                  | String                                                                 | Backup name                                                  |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | parent_id             | String                                                                 | Parent backup ID                                             |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | project_id            | String                                                                 | Project ID                                                   |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | protected_at          | String                                                                 | Backup time                                                  |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_az           | String                                                                 | Resource availability zone                                   |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_id           | String                                                                 | Resource ID                                                  |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_name         | String                                                                 | Resource name                                                |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_size         | Integer                                                                | Resource size, in GB                                         |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_type         | String                                                                 | Resource type                                                |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | Enumeration values:                                          |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **OS::Nova::Server**                                      |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **OS::Cinder::Volume**                                    |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | status                | String                                                                 | Backup status                                                |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | Enumeration values:                                          |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **available**                                             |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **protecting**                                            |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **deleting**                                              |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **restoring**                                             |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **error**                                                 |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **waiting_protect**                                       |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **waiting_delete**                                        |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **waiting_restore**                                       |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | updated_at            | String                                                                 | Update time, for example, **2020-02-05T10:38:34.209782**     |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | vault_id              | String                                                                 | Vault ID                                                     |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | children              | Array of :ref:`BackupResp <showbackup__response_backupresp>` objects   |                                                              |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+

.. _showbackup__response_backupextendinfo:

.. table:: **Table 5** BackupExtendInfo

   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter              | Type                                                               | Description                                                                                                                                                                                                                                                                                                 |
   +========================+====================================================================+=============================================================================================================================================================================================================================================================================================================+
   | auto_trigger           | Boolean                                                            | Whether the backup is automatically generated                                                                                                                                                                                                                                                               |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bootable               | Boolean                                                            | Whether the backup is a system disk backup                                                                                                                                                                                                                                                                  |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | incremental            | Boolean                                                            | Whether the backup is an incremental backup                                                                                                                                                                                                                                                                 |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | snapshot_id            | String                                                             | Snapshot ID of the disk backup                                                                                                                                                                                                                                                                              |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | support_lld            | Boolean                                                            | Whether to allow **lazyloading** for fast restoration                                                                                                                                                                                                                                                       |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | supported_restore_mode | String                                                             | Restoration mode. Possible values are **na**, **snapshot**, and **backup**. **snapshot** indicates the backup can be used to create a full-server image. **backup** indicates the data is restored from backups of the EVS disks of the server. **na** indicates the backup cannot be used for restoration. |
   |                        |                                                                    |                                                                                                                                                                                                                                                                                                             |
   |                        |                                                                    | Default: **na**                                                                                                                                                                                                                                                                                             |
   |                        |                                                                    |                                                                                                                                                                                                                                                                                                             |
   |                        |                                                                    | Enumeration values:                                                                                                                                                                                                                                                                                         |
   |                        |                                                                    |                                                                                                                                                                                                                                                                                                             |
   |                        |                                                                    | -  **na**                                                                                                                                                                                                                                                                                                   |
   |                        |                                                                    |                                                                                                                                                                                                                                                                                                             |
   |                        |                                                                    | -  **backup**                                                                                                                                                                                                                                                                                               |
   |                        |                                                                    |                                                                                                                                                                                                                                                                                                             |
   |                        |                                                                    | -  **snapshot**                                                                                                                                                                                                                                                                                             |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os_images_data         | Array of :ref:`ImageData <showbackup__response_imagedata>` objects | ID list of images created using backups                                                                                                                                                                                                                                                                     |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | contain_system_disk    | Boolean                                                            | Whether the VM backup data contains system disk data                                                                                                                                                                                                                                                        |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | encrypted              | Boolean                                                            | Whether the backup is encrypted                                                                                                                                                                                                                                                                             |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | system_disk            | Boolean                                                            | Whether the disk is a system disk                                                                                                                                                                                                                                                                           |
   +------------------------+--------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _showbackup__response_backupresp:

.. table:: **Table 6** BackupResp

   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | Parameter             | Type                                                                   | Description                                                  |
   +=======================+========================================================================+==============================================================+
   | checkpoint_id         | String                                                                 | Restore point ID                                             |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | created_at            | String                                                                 | Creation time, for example, **2020-02-05T10:38:34.209782**   |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | description           | String                                                                 | Backup description                                           |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | expired_at            | String                                                                 | Expiration time, for example, **2020-02-05T10:38:34.209782** |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | extend_info           | :ref:`BackupExtendInfo <showbackup__response_backupextendinfo>` object | Extended information                                         |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | id                    | String                                                                 | Backup ID                                                    |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | image_type            | String                                                                 | Backup type                                                  |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | Enumeration values:                                          |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **backup**                                                |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **replication**                                           |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | name                  | String                                                                 | Backup name                                                  |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | parent_id             | String                                                                 | Parent backup ID                                             |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | project_id            | String                                                                 | Project ID                                                   |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | protected_at          | String                                                                 | Backup time                                                  |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_az           | String                                                                 | Resource availability zone                                   |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_id           | String                                                                 | Resource ID                                                  |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_name         | String                                                                 | Resource name                                                |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_size         | Integer                                                                | Resource size, in GB                                         |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | resource_type         | String                                                                 | Resource type                                                |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | Enumeration values:                                          |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **OS::Nova::Server**                                      |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **OS::Cinder::Volume**                                    |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | status                | String                                                                 | Backup status                                                |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | Enumeration values:                                          |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **available**                                             |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **protecting**                                            |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **deleting**                                              |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **restoring**                                             |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **error**                                                 |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **waiting_protect**                                       |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **waiting_delete**                                        |
   |                       |                                                                        |                                                              |
   |                       |                                                                        | -  **waiting_restore**                                       |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | updated_at            | String                                                                 | Update time, for example, **2020-02-05T10:38:34.209782**     |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+
   | vault_id              | String                                                                 | Vault ID                                                     |
   +-----------------------+------------------------------------------------------------------------+--------------------------------------------------------------+

.. _showbackup__response_imagedata:

.. table:: **Table 7** ImageData

   ========= ====== ===========
   Parameter Type   Description
   ========= ====== ===========
   image_id  String Image ID
   ========= ====== ===========

.. table:: **Table 8** ReplicationRecordsExtraInfo

   +---------------------+---------+-----------------------------------------------------------------+
   | Parameter           | Type    | Description                                                     |
   +=====================+=========+=================================================================+
   | progress            | Integer | Replication progress                                            |
   +---------------------+---------+-----------------------------------------------------------------+
   | fail_code           | String  | Error code. This field is empty if the operation is successful. |
   +---------------------+---------+-----------------------------------------------------------------+
   | fail_reason         | String  | Error cause                                                     |
   +---------------------+---------+-----------------------------------------------------------------+
   | auto_trigger        | Boolean | Whether replication is automatically scheduled                  |
   +---------------------+---------+-----------------------------------------------------------------+
   | destinatio_vault_id | String  | Destination vault ID                                            |
   +---------------------+---------+-----------------------------------------------------------------+

Example Requests
----------------

.. code-block:: text

   GET  https://{endpoint}/v3/{project_id}/backups/{backup_id}

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "backup" : {
       "provider_id" : "0daac4c5-6707-4851-97ba-169e36266b66",
       "checkpoint_id" : "8b0851a8-adf3-4f4c-a914-dead08bf9664",
       "enterprise_project_id" : "0",
       "updated_at" : null,
       "vault_id" : "3b5816b5-f29c-4172-9d9a-76c719a659ce",
       "id" : "6df2b54c-dd62-4059-a07c-1b8f24f2725d",
       "resource_az" : "az1.dc1",
       "image_type" : "backup",
       "resource_id" : "94eba8b2-acc9-4d82-badc-127144cc5526",
       "resource_size" : 40,
       "children" : [ {
         "provider_id" : "0daac4c5-6707-4851-97ba-169e36266b66",
         "checkpoint_id" : "8b0851a8-adf3-4f4c-a914-dead08bf9664",
         "updated_at" : null,
         "vault_id" : "3b5816b5-f29c-4172-9d9a-76c719a659ce",
         "id" : "5d822633-2bbf-4af8-a16e-5ab1c7705235",
         "resource_az" : null,
         "image_type" : "backup",
         "resource_id" : "eccbcfdd-f843-4bbb-b2c0-a5ce861f9376",
         "resource_size" : 40,
         "children" : [ ],
         "parent_id" : "6df2b54c-dd62-4059-a07c-1b8f24f2725d",
         "extend_info" : {
           "auto_trigger" : true,
           "supported_restore_mode" : null,
           "os_images_data" : null,
           "snapshot_id" : "5230a977-1a94-4092-8edd-519303a44cda",
           "bootable" : true,
           "progress" : null,
           "support_lld" : null,
           "encrypted" : true
         },
         "project_id" : "4229d7a45436489f8c3dc2b1d35d4987",
         "status" : "available",
         "resource_name" : "ecs-1f0f-0002",
         "description" : null,
         "expired_at" : null,
         "name" : "autobk_a843_ecs-1f0f-0002",
         "created_at" : "2019-05-10T07:59:59.450700",
         "protected_at" : null,
         "resource_type" : "OS::Cinder::Volume"
       } ],
       "parent_id" : null,
       "extend_info" : {
         "auto_trigger" : true,
         "supported_restore_mode" : "backup",
         "os_images_data" : null,
         "contain_system_disk" : true,
         "snapshot_id" : null,
         "bootable" : null,
         "progress" : null,
         "support_lld" : true
       },
       "project_id" : "4229d7a45436489f8c3dc2b1d35d4987",
       "status" : "available",
       "resource_name" : "ecs-1f0f-0002",
       "description" : "backup_description",
       "expired_at" : null,
       "name" : "backup_name",
       "created_at" : "2019-05-10T07:59:12.084695",
       "protected_at" : null,
       "resource_type" : "OS::Nova::Server"
     }
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
